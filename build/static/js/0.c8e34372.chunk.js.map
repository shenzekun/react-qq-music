{"version":3,"sources":["../static/js/0.c8e34372.chunk.js","pages/search/search.jsx","store/search/action.js","pages/search/search.scss","pages/player/player.jsx","pages/player/player.scss"],"names":["webpackJsonp","166","module","__webpack_exports__","__webpack_require__","_asyncToGenerator","fn","gen","apply","this","arguments","Promise","resolve","reject","step","key","arg","info","value","error","done","then","err","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default","n","__WEBPACK_IMPORTED_MODULE_1_react__","__WEBPACK_IMPORTED_MODULE_1_react___default","__WEBPACK_IMPORTED_MODULE_2_prop_types__","__WEBPACK_IMPORTED_MODULE_2_prop_types___default","__WEBPACK_IMPORTED_MODULE_3__components_header_header__","__WEBPACK_IMPORTED_MODULE_4__search_scss__","__WEBPACK_IMPORTED_MODULE_5_react_redux__","__WEBPACK_IMPORTED_MODULE_6__store_search_action__","__WEBPACK_IMPORTED_MODULE_7__config_api__","__WEBPACK_IMPORTED_MODULE_8__utils_utils__","__WEBPACK_IMPORTED_MODULE_9__player_player__","_createClass","defineProperties","target","props","i","length","descriptor","protoProps","staticProps","Search","_Component","_this","getPrototypeOf","handleChange","e","setState","keyword","enter","state","isShowDelete","reset","keyCode","isShowHistory","isShowSearchResults","addHistory","search","onClick","matches","isShowCancel","history","localStorage","setItem","index","indexOf","previousElementSibling","innerHTML","splice","showPlayerDetail","list","console","log","showPlayer","getSong","assign","hotkeys","data","getLastKeyword","searchResult","fetching","isLoad","isGetHotKey","songsObject","page","componentDidMount","_ref","a","mark","_callee","wrap","_context","prev","next","window","addEventListener","onScroll","bind","getHotList","getItem","split","shuffle","hotkey","stop","array","count","arr","len","Math","min","temp","random","floor","unshift","callback","removeEventListener","_x2","_ref2","_callee2","res","result","undefined","_context2","abrupt","loading","searchList","sent","song","curpage","concat","message","accomplish","document","documentElement","clientHeight","pageYOffset","body","scrollHeight","_this2","createElement","className","type","id","placeholder","onChange","onKeyUp","map","item","songid","songname","singer","artist","name","href","special_url","special_key","k","isShowPlayer","propTypes","func","isRequired","object","getData","167","d","cancelPlayer","setPlayState","__WEBPACK_IMPORTED_MODULE_1__action_type__","__WEBPACK_IMPORTED_MODULE_2__config_api__","dispatch","hotList","t0","_x","artists","forEach","status","isPlay","169","exports","p","170","__WEBPACK_IMPORTED_MODULE_3__player_scss__","__WEBPACK_IMPORTED_MODULE_4_react_redux__","__WEBPACK_IMPORTED_MODULE_5__config_utils__","__WEBPACK_IMPORTED_MODULE_6__utils_utils__","__WEBPACK_IMPORTED_MODULE_8__store_search_action__","Player","onPlay","isplay","refs","$audio","play","startLyrics","startProgress","pause","pauseLyrics","pauseProgress","exit","classList","remove","duration","interval","progressIntervalId","lyrics","progress","elapsed","lyricIntervalId","LINE_HEIGHT","add","getLyrics","lyric","match","setInterval","updateLyrics","clearInterval","ontimeupdate","l","currentTime","$lyricsLines","children","y","style","transform","resetLyrics","restartProgress","restartLyrics","updateProgress","_this3","$progress","resetProgress","src","albummid","alt","ref","slice","backgroundImage","songmid","onEnded","onEnd","string","bool","171"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAgB8f,SAASC,GAAkBC,GAAI,MAAO,YAAW,GAAIC,GAAID,EAAGE,MAAMC,KAAKC,UAAW,OAAO,IAAIC,SAAQ,SAASC,EAAQC,GAAQ,QAASC,GAAKC,EAAIC,GAAK,IAAI,GAAIC,GAAKV,EAAIQ,GAAKC,GAASE,EAAMD,EAAKC,MAAO,MAAMC,GAAqB,WAAdN,GAAOM,GAAe,IAAGF,EAAKG,KAA2B,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAASH,GAAOJ,EAAK,OAAOI,IAAS,SAASI,GAAKR,EAAK,QAAQQ,IAAxHV,GAAQM,GAA0H,MAAOJ,GAAK,WAAc,QAASS,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAuC,QAASC,GAA2BC,EAAKC,GAAM,IAAID,EAAM,KAAM,IAAIE,gBAAe,4DAA8D,QAAOD,GAAqB,iBAAPA,IAA+B,mBAAPA,GAAwBD,EAALC,EAAW,QAASE,GAAUC,EAASC,GAAY,GAAuB,mBAAbA,IAAsC,OAAbA,EAAmB,KAAM,IAAIP,WAAU,iEAAkEO,GAAaD,GAASE,UAAUC,OAAOC,OAAOH,GAAYA,EAAWC,WAAWG,aAAanB,MAAMc,EAASM,YAAW,EAAMC,UAAS,EAAKC,cAAa,KAAWP,IAAWE,OAAOM,eAAeN,OAAOM,eAAeT,EAASC,GAAYD,EAASU,UAAUT,GAfnrDE,OAAOQ,eAAexC,EAAqB,cAAgBe,OAAO,GAC7C,IAAI0B,GAA0DxC,EAAoB,GAC9EyC,EAAkEzC,EAAoB0C,EAAEF,GACxFG,EAAsC3C,EAAoB,GAC1D4C,EAA8C5C,EAAoB0C,EAAEC,GACpEE,EAA2C7C,EAAoB,GAC/D8C,EAAmD9C,EAAoB0C,EAAEG,GACzEE,EAA0D/C,EAAoB,IAC9EgD,EAA6ChD,EAAoB,KAEjEiD,GADqDjD,EAAoB0C,EAAEM,GAC/BhD,EAAoB,KAChEkD,EAAqDlD,EAAoB,KACzEmD,EAA4CnD,EAAoB,GAChEoD,EAA6CpD,EAAoB,IACjEqD,EAA+CrD,EAAoB,KACxFsD,EAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,GAAIE,GAAWH,EAAMC,EAAGE,GAAW1B,WAAW0B,EAAW1B,aAAY,EAAM0B,EAAWxB,cAAa,EAAQ,SAAUwB,KAAWA,EAAWzB,UAAS,GAAKJ,OAAOQ,eAAeiB,EAAOI,EAAWjD,IAAIiD,IAAc,MAAO,UAASvC,EAAYwC,EAAWC,GAAuI,MAAvHD,IAAWN,EAAiBlC,EAAYS,UAAU+B,GAAeC,GAAYP,EAAiBlC,EAAYyC,GAAoBzC,MCXte0C,EDWosD,SAASC,GCN/sD,QAAAD,GAAYN,GAAOtC,EAAAd,KAAA0D,EAAA,IAAAE,GAAA1C,EAAAlB,MAAA0D,EAAAzB,WAAAP,OAAAmC,eAAAH,IAAAtC,KAAApB,KACToD,GADS,OAAAQ,GAgFnBE,aAAe,SAAAC,GACXH,EAAKI,UACDC,QAASvC,OAAAqB,EAAA,GAAKgB,EAAEZ,OAAO1C,UAlFZmD,EAuFnBM,MAAQ,SAAAH,GACAH,EAAKO,MAAMF,QACXL,EAAKI,UAAWI,cAAc,KAG9BR,EAAKI,UAAWI,cAAc,IAE9BR,EAAKS,SAES,KAAdN,EAAEO,UACNV,EAAKI,UACDO,eAAe,EACfC,qBAAqB,IAIzBZ,EAAKa,WAAWb,EAAKO,MAAMF,SAC3BL,EAAKc,OAAOd,EAAKO,MAAMF,WAxGRL,EA2GnBe,QAAU,SAAAZ,GAyBN,GAvBIA,EAAEZ,OAAOyB,QAAQ,YACjBhB,EAAKI,UACDa,cAAc,EACdN,eAAe,IAMnBR,EAAEZ,OAAOyB,QAAQ,oBACjBhB,EAAKI,UAAWa,cAAc,EAAOT,cAAc,EAAOG,eAAe,IAIzEX,EAAKS,SAGLN,EAAEZ,OAAOyB,QAAQ,kBAEjBhB,EAAKI,UAAWI,cAAc,IAC9BR,EAAKS,SAGLN,EAAEZ,OAAOyB,QAAQ,kBAAmB,CACpC,GAAIE,KAEJC,cAAaC,QAAQ,kBAAmBF,GACxClB,EAAKI,UAAWc,QAASA,IAG7B,GAAIf,EAAEZ,OAAOyB,QAAQ,oBAAqB,CACtC,GAAIE,GAAUlB,EAAKO,MAAMW,QACrBG,EAAQH,EAAQI,QAAQnB,EAAEZ,OAAOgC,uBAAuBC,UAC5DN,GAAQO,OAAOJ,EAAO,GACtBF,aAAaC,QAAQ,kBAAmBF,GACxClB,EAAKI,UAAWc,QAASA,KAGzBf,EAAEZ,OAAOyB,QAAQ,iBAAmBb,EAAEZ,OAAOyB,QAAQ,iBAKrDhB,EAAKI,UAEGC,QAASvC,OAAAqB,EAAA,GAAKgB,EAAEZ,OAAOiC,WACvBhB,cAAc,EACdS,cAAc,EACdN,eAAe,EACfC,qBAAqB,GAEzB,WACIZ,EAAKa,WAAWb,EAAKO,MAAMF,SAC3BL,EAAKc,OAAOd,EAAKO,MAAMF,YAlKpBL,EAqOnB0B,iBAAmB,SAAAC,GACfC,QAAQC,IAAIF,GACZ3B,EAAKR,MAAMsC,aACX9B,EAAKR,MAAMuC,QAAXjE,OAAAkE,UAAwBL,KAtOxB3B,EAAKO,OACD0B,WACAf,WACAgB,KAAM,GACN7B,QAAS,GACT8B,eAAgB,GAChBC,gBACAnB,cAAc,EACdT,cAAc,EACdG,eAAe,EACfC,qBAAqB,EACrByB,UAAU,EACVC,QAAQ,EACRC,aAAa,GAGjBvC,EAAKwC,eACLxC,EAAKyC,KAAO,EAnBGzC,EDoEszJ,MA9D9mGtC,GAAUoC,EAAOC,GA4CluDV,EAAaS,IAASpD,IAAI,oBAAoBG,MAAM,WAE+G,QAAS6F,KAAoB,MAAOC,GAAKxG,MAAMC,KAAKC,WAFxJ,GAAIsG,GAAK3G,EAA+BwC,EAAgEoE,EAAEC,KAAK,QAASC,KAAU,GAAI5B,EAAQ,OAAO1C,GAAgEoE,EAAEG,KAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,IAAK,GAA6E,MCrB5bC,QAAOC,iBAAiB,SAAUhH,KAAKiH,SAASC,KAAKlH,ODqBuX4G,EAASE,KAAK,ECpBpb9G,KAAKoD,MAAM+D,YDoB0c,KAAK,GCnB1drC,EAAUC,aAAaqC,QAAQ,mBAC/BrC,aAAaqC,QAAQ,mBAAmBC,MAAM,QAEpDrH,KAAKgE,UAAWmC,aAAa,EAAMrB,QAASA,IAGxC9E,KAAKoD,MAAMyC,SACX7F,KAAKgE,UACD6B,QAAS7F,KAAKsH,QAAQtH,KAAKoD,MAAMyC,QAAQ0B,OAAQ,GACjDzB,KAAM9F,KAAKoD,MAAMyC,SDYkF,KAAK,GAAE,IAAI,MAAM,MAAOe,GAASY,SAAWd,EAAQ1G,QAA0E,OAAOsG,QACrPhG,IAAI,UAAUG,MAAM,SCPXgH,EAAOC,GAGX,IAAK,GAFDC,MACAC,EAAMC,KAAKC,IAAIJ,EAAOD,EAAMnE,QACvBD,EAAI,EAAGA,EAAIuE,EAAKvE,IAAK,CAC1B,GAAI0E,GAAON,EACPO,EAASH,KAAKI,MAAMJ,KAAKG,SAAWD,EAAKzE,OAC7CqE,GAAItE,GAAK0E,EAAKC,GACdP,EAAMpC,OAAO2C,EAAQ,GAEzB,MAAOL,MDDZrH,IAAI,QAAQG,MAAM,WCMbT,KAAKqG,KAAO,EACZrG,KAAKoG,eACLpG,KAAKgE,UAAWgC,gBAAkBE,QAAQ,ODN/C5F,IAAI,aAAaG,MAAM,SCWXwD,GACP,GAAIA,EAAS,CACT,GAAIa,GAAU9E,KAAKmE,MAAMW,SAEV,IADHA,EAAQI,QAAQjB,KAExBa,EAAQoD,QAAQjE,GAChBc,aAAaC,QAAQ,kBAAmBF,GACxCU,QAAQC,IAAIX,GACZ9E,KAAKgE,UAAWc,QAASA,SDlBtCxE,IAAI,uBAAuBG,MAAM,WCgH5BT,KAAKgE,SAAW,SAACG,EAAOgE,KAGxBpB,OAAOqB,oBAAoB,SAAUpI,KAAKiH,SAASC,KAAKlH,UDlH7DM,IAAI,SAASG,MAAM,WAIgH,QAASiE,GAAO2D,GAAK,MAAOC,GAAMvI,MAAMC,KAAKC,WAJlJ,GAAIqI,GAAM1I,EAA+BwC,EAAgEoE,EAAEC,KAAK,QAAS8B,GCsHzItE,GDtH2J,GAAyEuE,GAAIC,ECsH/NpC,EDtH2JpG,UAAUqD,OAAO,OAAkBoF,KAAfzI,UAAU,GAAeA,UAAU,GCsH3M,CDtH+N,OAAOmC,GAAgEoE,EAAEG,KAAK,SAAmBgC,GAAW,OAAS,OAAOA,EAAU9B,KAAK8B,EAAU7B,MAAM,IAAK,GAC9X,OCuHV4B,KAAZzE,IAAuBA,EAAU,IACrB,KAAZA,EDxHyC,CAAC0E,EAAU7B,KAAK,CAAE,OAAO,MAAO6B,GAAUC,OAAO,SAAU,KAAK,GAAE,GC0H3G5I,KAAKmE,MAAM4B,iBAAmB9B,IAAWjE,KAAKoG,YAAYC,GAAQrG,KAAKqG,MD1HiH,CAACsC,EAAU7B,KAAK,CAAE,OAAO,MAAO6B,GAAUC,OAAO,SAAU,KAAK,GAAsD,GC2H9S5I,KAAKmE,MAAM4B,iBAAmB9B,GAASjE,KAAKqE,SAC5CrE,KAAKmE,MAAM8B,UAAajG,KAAKmE,MAAM+B,OD5HyT,CAACyC,EAAU7B,KAAK,CAAE,OAAO,MAAO6B,GAAUC,OAAO,SAAU,KAAK,GAA2E,MC6H3e5I,MAAKgE,UAAW+B,eAAgB9B,IAChCjE,KAAK6I,UD9HodF,EAAU7B,KAAK,GC+HxdhE,EAAA,EAAIgG,WAAW7E,EAASoC,GAAQrG,KAAKqG,KD/H8hB,KAAK,IC+HplBmC,ED/H2lBG,EAAUI,KCgIzmB/I,KAAKqG,KAAOmC,EAAIQ,KAAKC,QACrBjJ,KAAKoG,YAAYpG,KAAKqG,MAAQmC,EAAIQ,KAAKzD,KACnCvF,KAAKmE,MAAM6B,cACPyC,EAASzI,KAAKmE,MAAM6B,aACxBhG,KAAKgE,UAAWgC,aAAcyC,EAAOS,OAAOV,EAAIQ,KAAKzD,SAGrDvF,KAAKgE,UAAWgC,aAAcwC,EAAIQ,KAAKzD,OAI3CvF,KAAKgE,UAAWkC,OAAwB,eAAhBsC,EAAIW,UAC5BnJ,KAAKoJ,YDzIwD,KAAK,IAAG,IAAI,MAAM,MAAOT,GAAUnB,SAAWe,EAASvI,QAAmE,OAAO0E,QACnMpE,IAAI,aAAaG,MAAM,WC6IlBT,KAAKgE,UAAWiC,UAAU,OD3I/B3F,IAAI,UAAUG,MAAM,WCiJfT,KAAKgE,UAAWiC,UAAU,OD/I/B3F,IAAI,WAAWG,MAAM,SCoJXsD,GACL,IAAI/D,KAAKmE,MAAM+B,OAQX,MAAOa,QAAOqB,oBAAoB,SAAUpI,KAAKiH,SAASC,KAAKlH,MAN3DqJ,UAASC,gBAAgBC,aAAexC,OAAOyC,YAC/CH,SAASI,KAAKC,aAAe,KAE7B1J,KAAK0E,OAAO1E,KAAKmE,MAAMF,QAASjE,KAAKqG,KAAO,MDzJzD/F,IAAI,SAASG,MAAM,WCuKT,GAAAkJ,GAAA3J,IACL,OACIuC,GAAAiE,EAAAoD,cAAA,WACIrH,EAAAiE,EAAAoD,cAAClH,EAAA,EAAD,MACAH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,gBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,0BAA0BlF,QAAS3E,KAAK2E,SACnDpC,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,cACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,cACXtH,EAAAiE,EAAAoD,cAAA,SACIE,KAAK,OACLC,GAAG,SACHC,YAAY,+DACZC,SAAUjK,KAAK8D,aACfoG,QAASlK,KAAKkE,MACdzD,MAAOT,KAAKmE,MAAMF,UAEtB1B,EAAAiE,EAAAoD,cAAA,QAAMC,UAAU,gBACf7J,KAAKmE,MAAMC,aACR7B,EAAAiE,EAAAoD,cAAA,QAAMC,UAAU,eAAhB,gBACA,MAEP7J,KAAKmE,MAAMU,aACRtC,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,iBAAf,gBACA,MAEP7J,KAAKmE,MAAMW,QAAQxB,OAAS,GAAKtD,KAAKmE,MAAMI,cACzChC,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,eACV7J,KAAKmE,MAAMW,QAAQqF,IAAI,SAACC,EAAMnF,GAC3B,MACI1C,GAAAiE,EAAAoD,cAAA,MAAItJ,IAAK2E,GACL1C,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,eACXtH,EAAAiE,EAAAoD,cAAA,QAAMC,UAAU,oBAChBtH,EAAAiE,EAAAoD,cAAA,QAAMC,UAAU,uBAAuBO,GACvC7H,EAAAiE,EAAAoD,cAAA,QAAMC,UAAU,wBAKhCtH,EAAAiE,EAAAoD,cAAA,KAAGC,UAAU,iBAAb,yCAEJ,KACH7J,KAAKmE,MAAMK,oBACRjC,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,kBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,aACV7J,KAAKmE,MAAM6B,aAAamE,IAAI,SAAA5E,GACzB,MACIhD,GAAAiE,EAAAoD,cAAA,OACIC,UAAU,YACVvJ,IAAKiF,EAAK8E,OACV1F,QAASgF,EAAKrE,iBAAiB4B,KAAtByC,EAAiCpE,IAE1ChD,EAAAiE,EAAAoD,cAAA,KAAGC,UAAU,oBACbtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,aACVnI,OAAAqB,EAAA,GAAWwC,EAAK+E,WAErB/H,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,eACVtE,EAAKgF,OAAOJ,IAAI,SAACK,EAAQvF,GACtB,MACI1C,GAAAiE,EAAAoD,cAAA,QAAMtJ,IAAK2E,GACNvD,OAAAqB,EAAA,GAAWyH,EAAOC,MAAQ,YAS1DzK,KAAKmE,MAAM8B,SACR1D,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,uBACXtH,EAAAiE,EAAAoD,cAAA,KAAGC,UAAU,iBACbtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,gBAAf,4CAEJ,KACH7J,KAAKmE,MAAM+B,OAAS,KACjB3D,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,uBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,gBAAf,oCAIZ,KACF7J,KAAKmE,MAAMI,eAAkBvE,KAAKmE,MAAMK,oBA0BtC,KAzBAjC,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,oBAAoBE,GAAG,YAClCxH,EAAAiE,EAAAoD,cAAA,MAAIC,UAAU,cAAd,4BACC7J,KAAKmE,MAAMgC,YACR5D,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,eACXtH,EAAAiE,EAAAoD,cAAA,KACIc,KAAM1K,KAAKmE,MAAM2B,KAAK6E,YACtBd,UAAU,eAET7J,KAAKmE,MAAM2B,KAAK8E,aAEpB5K,KAAKmE,MAAM0B,QAAQsE,IAAI,SAAA5C,GACpB,MACIhF,GAAAiE,EAAAoD,cAAA,OAAKC,UAAU,kBAAkBvJ,IAAKiH,EAAOlF,GACxCkF,EAAOsD,MAMxBtI,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,uBACXtH,EAAAiE,EAAAoD,cAAA,KAAGC,UAAU,iBACbtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,gBAAf,kCAMnB7J,KAAKoD,MAAM0H,aAAevI,EAAAiE,EAAAoD,cAAC5G,EAAA,EAAD,MAAa,WDpRwxJU,GCzE/zJpB,EAAA,UAAfoB,GACKqH,WACH5D,WAAY1E,EAAA+D,EAAUwE,KAAKC,WAC3BpF,QAASpD,EAAA+D,EAAU0E,OAAOD,YAiWlCvL,EAAA,QAAegC,OAAAkB,EAAA,GACX,SAAAuB,GAAA,OACI0B,QAAS1B,EAAMgH,QAAQtF,QACvBiF,aAAc3G,EAAMgH,QAAQL,gBAG5B3D,WAAAtE,EAAA,EACA6C,WAAA7C,EAAA,EACA8C,QAAA9C,EAAA,IAENa,IDjSI0H,IACA,SAAU3L,EAAQC,EAAqBC,GAE7C,YAUe,SAASC,GAAkBC,GAAI,MAAO,YAAW,GAAIC,GAAID,EAAGE,MAAMC,KAAKC,UAAW,OAAO,IAAIC,SAAQ,SAASC,EAAQC,GAAQ,QAASC,GAAKC,EAAIC,GAAK,IAAI,GAAIC,GAAKV,EAAIQ,GAAKC,GAASE,EAAMD,EAAKC,MAAO,MAAMC,GAAqB,WAAdN,GAAOM,GAAe,IAAGF,EAAKG,KAA2B,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAASH,GAAOJ,EAAK,OAAOI,IAAS,SAASI,GAAKR,EAAK,QAAQQ,IAAxHV,GAAQM,GAA0H,MAAOJ,GAAK,WATrXV,EAAoB0L,EAAE3L,EAAqB,IAAK,WAAa,MAAOyH,KACpExH,EAAoB0L,EAAE3L,EAAqB,IAAK,WAAa,MAAOgG,KACpE/F,EAAoB0L,EAAE3L,EAAqB,IAAK,WAAa,MAAO4L,KACpE3L,EAAoB0L,EAAE3L,EAAqB,IAAK,WAAa,MAAOiG,KACpEhG,EAAoB0L,EAAE3L,EAAqB,IAAK,WAAa,MAAO6L,IAC9E,IAAIpJ,GAA0DxC,EAAoB,GAC9EyC,EAAkEzC,EAAoB0C,EAAEF,GACxFqJ,EAA6C7L,EAAoB,IACjE8L,EAA4C9L,EAAoB,GACrFiE,EAAM5D,KEhGGmH,EAAa,WACtB,qBAAAZ,GAAA3G,EAAAwC,EAAAoE,EAAAC,KAAO,QAAAC,GAAMgF,GAAN,GAAAjD,EAAA,OAAArG,GAAAoE,EAAAG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aAAAF,GAAAC,KAAA,EAAAD,EAAAE,KAAA,EAEoB2E,EAAA,EAAIE,SAFxB,QAEKlD,EAFL7B,EAAAmC,KAGC2C,GACI5B,KAAM0B,EAAA,EACN1F,KAAM2C,IALX7B,EAAAE,KAAA,qBAAAF,GAAAC,KAAA,EAAAD,EAAAgF,GAAAhF,EAAA,SAAAA,EAAAgF,EAAA,yBAAAhF,GAAAY,SAAAd,EAAA9C,IAAA,SAAP,iBAAAiI,GAAA,MAAAtF,GAAAxG,MAAAC,KAAAC,gBAcSyF,EAAa,WACtB,OACIoE,KAAM0B,EAAA,EACNV,cAAc,IAKTQ,EAAe,WACxB,OACIxB,KAAM0B,EAAA,EACNV,cAAc,IAKTnF,EAAU,SAAAJ,GACnB,MAAO,UAAAmG,GACH,GAAII,GAAU,EACdvG,GAAKgF,OAAOwB,QAAQ,SAAAxB,GAChBuB,GAAWvB,EAAOE,OAEtBiB,GACI5B,KAAM0B,EAAA,EACNxC,KAAMzD,EACNiF,OAAQsB,MAMPP,EAAe,SAAAS,GACxB,OACIlC,KAAM0B,EAAA,EACNS,OAAQD,KFwDVE,IACA,SAAUzM,EAAQ0M,EAASxM,GG9GjCF,EAAA0M,QAAAxM,EAAAyM,EAAA,qCHoHMC,IACA,SAAU5M,EAAQC,EAAqBC,GAE7C,YAc8f,SAASC,GAAkBC,GAAI,MAAO,YAAW,GAAIC,GAAID,EAAGE,MAAMC,KAAKC,UAAW,OAAO,IAAIC,SAAQ,SAASC,EAAQC,GAAQ,QAASC,GAAKC,EAAIC,GAAK,IAAI,GAAIC,GAAKV,EAAIQ,GAAKC,GAASE,EAAMD,EAAKC,MAAO,MAAMC,GAAqB,WAAdN,GAAOM,GAAe,IAAGF,EAAKG,KAA2B,MAAOT,SAAQC,QAAQM,GAAOG,KAAK,SAASH,GAAOJ,EAAK,OAAOI,IAAS,SAASI,GAAKR,EAAK,QAAQQ,IAAxHV,GAAQM,GAA0H,MAAOJ,GAAK,WAAc,QAASS,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAuC,QAASC,GAA2BC,EAAKC,GAAM,IAAID,EAAM,KAAM,IAAIE,gBAAe,4DAA8D,QAAOD,GAAqB,iBAAPA,IAA+B,mBAAPA,GAAwBD,EAALC,EAAW,QAASE,GAAUC,EAASC,GAAY,GAAuB,mBAAbA,IAAsC,OAAbA,EAAmB,KAAM,IAAIP,WAAU,iEAAkEO,GAAaD,GAASE,UAAUC,OAAOC,OAAOH,GAAYA,EAAWC,WAAWG,aAAanB,MAAMc,EAASM,YAAW,EAAMC,UAAS,EAAKC,cAAa,KAAWP,IAAWE,OAAOM,eAAeN,OAAOM,eAAeT,EAASC,GAAYD,EAASU,UAAUT,GAb9pD,GAAIW,GAA0DxC,EAAoB,GAC9EyC,EAAkEzC,EAAoB0C,EAAEF,GACxFG,EAAsC3C,EAAoB,GAC1D4C,EAA8C5C,EAAoB0C,EAAEC,GACpEE,EAA2C7C,EAAoB,GAC/D8C,EAAmD9C,EAAoB0C,EAAEG,GACzE8J,EAA6C3M,EAAoB,KAEjE4M,GADqD5M,EAAoB0C,EAAEiK,GAC/B3M,EAAoB,KAChE6M,EAA8C7M,EAAoB,IAClE8M,EAA6C9M,EAAoB,IACjEmD,EAA4CnD,EAAoB,GAChE+M,EAAqD/M,EAAoB,KAC9FsD,EAAa,WAAW,QAASC,GAAiBC,EAAOC,GAAO,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,GAAIE,GAAWH,EAAMC,EAAGE,GAAW1B,WAAW0B,EAAW1B,aAAY,EAAM0B,EAAWxB,cAAa,EAAQ,SAAUwB,KAAWA,EAAWzB,UAAS,GAAKJ,OAAOQ,eAAeiB,EAAOI,EAAWjD,IAAIiD,IAAc,MAAO,UAASvC,EAAYwC,EAAWC,GAAuI,MAAvHD,IAAWN,EAAiBlC,EAAYS,UAAU+B,GAAeC,GAAYP,EAAiBlC,EAAYyC,GAAoBzC,MI5Hte2L,EJ4HosD,SAAShJ,GItH/sD,QAAAgJ,GAAYvJ,GAAOtC,EAAAd,KAAA2M,EAAA,IAAAhD,GAAAzI,EAAAlB,MAAA2M,EAAA1K,WAAAP,OAAAmC,eAAA8I,IAAAvL,KAAApB,KACToD,GADS,OAAAuG,GA4BnBiD,OAAS,WAGL,GAFAjD,EAAKkD,QAAUlD,EAAKkD,OAEhBlD,EAAKkD,OAAQ,CACb,GAAIlD,EAAKxF,MAAM8B,SAAU,MACzB0D,GAAKmD,KAAKC,OAAOC,OACjBrD,EAAKvG,MAAMmI,cAAa,GACxB5B,EAAKsD,cACLtD,EAAKuD,oBAGLvD,GAAKmD,KAAKC,OAAOI,QACjBxD,EAAKvG,MAAMmI,cAAa,GACxB5B,EAAKyD,cACLzD,EAAK0D,iBA1CM1D,EA0JnB2D,KAAO,WACH3D,EAAKvG,MAAMkI,eACX3B,EAAKvG,MAAMmI,cAAa,GACxBlC,SAASI,KAAK8D,UAAUC,OAAO,aA3J/B7D,EAAKxF,OACD8B,UAAU,EACVwH,SAAU9D,EAAKvG,MAAM4F,KAAK0E,SAC1BC,mBAAoB,EACpBC,UACA3I,MAAO,EACP4I,SAAU,EACVC,QAAS,GAEbnE,EAAKkD,QAAS,EACdlD,EAAKoE,gBAAkB,EACvBpE,EAAKqE,YAAc,GAbJrE,EJuJ02D,MAjClKrI,GAAUqL,EAAOhJ,GAajuDV,EAAa0J,IAASrM,IAAI,oBAAoBG,MAAM,WAAmxB,QAAS6F,KAAoB,MAAOC,GAAKxG,MAAMC,KAAKC,WAA5zB,GAAIsG,GAAK3G,EAA+BwC,EAAgEoE,EAAEC,KAAK,QAASC,KAAU,GAAI8B,EAAI,OAAOpG,GAAgEoE,EAAEG,KAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,IAAK,GAAyF,MInHrcuC,UAASI,KAAK8D,UAAUU,IAAI,YAC5BjO,KAAKgE,UAAWiC,UAAU,IJkH2ZW,EAASE,KAAK,EIjHnbhE,EAAA,EAAIoL,UAAUlO,KAAKoD,MAAM4F,KAAKqB,OJiH6f,KAAK,GIjH5iB7B,EJiHkjB5B,EAASmC,KIhH/jB/I,KAAKgE,UACDiB,MAAO,EACP2I,OAAQlM,OAAA+K,EAAA,GAAWjE,EAAI2F,OAAOC,MAAM,mCAExCpO,KAAKgE,UAAWiC,UAAU,IAC1BT,QAAQC,IAAI+C,EJ2GowB,KAAK,GAAE,IAAI,MAAM,MAAO5B,GAASY,SAAWd,EAAQ1G,QAA0E,OAAOsG,QAC15BhG,IAAI,cACPG,MAAM,WIrFET,KAAKoN,cACLpN,KAAK+N,gBAAkBM,YAAYrO,KAAKsO,aAAapH,KAAKlH,MAAO,QJqFtEM,IAAI,cAAcG,MAAM,WIjFnB8N,cAAcvO,KAAK+N,oBJkFxBzN,IAAI,eAAeG,MAAM,WI7EpB,GAAImD,GAAQ5D,IACZ,IAAIA,KAAK8M,KAAKC,QAAU/M,KAAK8M,KAAKC,OAAOyB,eACrCxO,KAAK8M,KAAKC,OAAOyB,aAAe,SAASzK,GACrC,IAAK,GAAIV,GAAI,EAAGoL,EAAI7K,EAAMO,MAAMyJ,OAAOtK,OAAQD,EAAIoL,EAAGpL,IAE9CO,EAAMkJ,KAAKC,OAAO2B,YAClBhN,OAAA+K,EAAA,GAAW7I,EAAMO,MAAMyJ,OAAOvK,IAAM,KAEpCO,EAAMkJ,KAAK6B,aAAaC,SAAShL,EAAMO,MAAMc,OAAOsI,UAAUC,OAC1D,UAEJ5J,EAAMkJ,KAAK6B,aAAaC,SAASvL,GAAGkK,UAAUU,IAAI,UAClDrK,EAAMO,MAAMc,MAAQ5B,IAI5BrD,KAAKmE,MAAMc,MAAQ,GAAG,CACtB,GAAI4J,KAAM7O,KAAKmE,MAAMc,MAAQ,GAAKjF,KAAKgO,WACvChO,MAAK8M,KAAK6B,aAAaG,MAAMC,UAA7B,cAAuDF,EAAvD,UJ4DbvO,IAAI,cAAcG,MAAM,WIrDnBT,KAAKoN,cACLpN,KAAK8M,KAAK6B,aAAaC,SAAS5O,KAAKiF,OAAOsI,UAAUC,OAAO,UAC7DxN,KAAKgE,UAAWiB,MAAO,IAEvBjF,KAAK8M,KAAK6B,aAAaG,MAAMC,UAA7B,gBACI/O,KAAKmE,MAAMyJ,OAAOtK,QAClBtD,KAAK8M,KAAK6B,aAAaC,SAAS5O,KAAKmE,MAAMc,OAAOsI,UAAUU,IAAI,aJiDzE3N,IAAI,gBAAgBG,MAAM,WI5CrBT,KAAKgP,cACLhP,KAAKiN,iBJ4CV3M,IAAI,QAAQG,MAAM,WIvCbT,KAAK8M,KAAKC,OAAOC,OACjBhN,KAAKiP,kBACLjP,KAAKkP,mBJsCV5O,IAAI,gBAAgBG,MAAM,WIjCrBT,KAAKqN,gBACLrN,KAAK2N,mBAAqBU,YAAYrO,KAAKmP,eAAejI,KAAKlH,MAAO,OJiC3EM,IAAI,gBAAgBG,MAAM,WI7BrB8N,cAAcvO,KAAK2N,uBJ8BxBrN,IAAI,iBAAiBG,MAAM,WI3BT,GAAA2O,GAAApP,IACbA,MAAKgE,UAEG8J,QAAS9N,KAAKmE,MAAM2J,QAAU,KAElC,WACIsB,EAAKpL,UACD6J,SAAUuB,EAAKjL,MAAM2J,QAAUsB,EAAKjL,MAAMsJ,aAMtDzN,KAAK8M,KAAKuC,UAAUP,MAAMC,UAA1B,eAA0E,IAAtB/O,KAAKmE,MAAM0J,SAAiB,KAAhF,QJiBLvN,IAAI,gBAAgBG,MAAM,SIdXgN,GACMzN,KAAKqN,eACrBrN,MAAKgE,UACD8J,QAAS,EACTD,SAAU,IAId7N,KAAK8M,KAAKuC,UAAUP,MAAMC,UAAY,mBAClCtB,GACAzN,KAAKgE,UACDyJ,UAAWA,OJOxBnN,IAAI,kBAAkBG,MAAM,WIAvBT,KAAKsP,gBACLtP,KAAKkN,mBJAV5M,IAAI,uBAAuBG,MAAM,WIW5BT,KAAKoN,cACLpN,KAAKqN,gBACLrN,KAAKgE,SAAW,SAACG,EAAOgE,QJbgI7H,IAAI,SAASG,MAAM,WImB3K,MACI8B,GAAAiE,EAAAoD,cAAA,OAAKG,GAAG,SAASF,UAAU,QACvBtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,oBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,iBACXtH,EAAAiE,EAAAoD,cAAA,OACI2F,IAAK7N,OAAA8K,EAAA,GAAcxM,KAAKoD,MAAM4F,KAAKwG,UACnCC,IAAI,eACJ5F,UAAU,gBAEdtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,aACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,aAAanI,OAAA+K,EAAA,GAAWzM,KAAKoD,MAAM4F,KAAKsB,WACvD/H,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,eAAenI,OAAA+K,EAAA,GAAWzM,KAAKoD,MAAMoH,UAExDjI,EAAAiE,EAAAoD,cAAA,QACIC,UACI7J,KAAKoD,MAAM6I,OACL,mCACA,kCAEVtH,QAAS3E,KAAK4M,UAGtBrK,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,iBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,sBAAsB6F,IAAI,gBACd,IAAtB1P,KAAKmE,MAAMyJ,OACN5N,KAAKmE,MAAMyJ,OAAOzD,IAAI,SAAC5E,EAAMN,GAEzB,MACI1C,GAAAiE,EAAAoD,cAAA,OAAKC,UAAU,qBAAqBvJ,IAAK2E,GACpCM,EAAKoK,MAAM,OAIxB,KACL3P,KAAKmE,MAAM8B,SACR1D,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,sBAAf,8DACA,OAGZtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,iBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,YAAYlF,QAAS3E,KAAKsN,OACzC/K,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,YACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,kCACVnI,OAAA+K,EAAA,GAAWzM,KAAKmE,MAAM2J,UAE3BvL,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,gBACXtH,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,wBAAwB6F,IAAI,eAE/CnN,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,mCACVnI,OAAA+K,EAAA,GAAWzM,KAAKoD,MAAM4F,KAAK0E,YAGpCnL,EAAAiE,EAAAoD,cAAA,OAAKC,UAAU,UACXtH,EAAAiE,EAAAoD,cAAA,KAAGc,KAAK,IAAIb,UAAU,gBAAtB,qCAMZtH,EAAAiE,EAAAoD,cAAA,OACIC,UAAU,oBACViF,OACIc,gBAAiB,OAASlO,OAAA8K,EAAA,GAAcxM,KAAKoD,MAAM4F,KAAKwG,UAAY,OAG5EjN,EAAAiE,EAAAoD,cAAA,SAAO2F,IAAK7N,OAAA8K,EAAA,GAAQxM,KAAKoD,MAAM4F,KAAK6G,SAAUH,IAAI,SAASI,QAAS9P,KAAK+P,aJnF+yDpD,GI7Jn3DrK,EAAA,UAAfqK,GACK5B,WACH/B,KAAMvG,EAAA+D,EAAU0E,OAAOD,WACvBT,OAAQ/H,EAAA+D,EAAUwJ,OAAO/E,WACzBgB,OAAQxJ,EAAA+D,EAAUyJ,KAAKhF,YAkP/BvL,EAAA,EAAegC,OAAA6K,EAAA,GACX,SAAApI,GAAA,OACI6E,KAAM7E,EAAMgH,QAAQnC,KACpBwB,OAAQrG,EAAMgH,QAAQX,OACtByB,OAAQ9H,EAAMgH,QAAQc,UAGtBV,aAAAmB,EAAA,EACApB,aAAAoB,EAAA,IAENC,IJ/FIuD,IACA,SAAUzQ,EAAQ0M,EAASxM,GK3KjCF,EAAA0M,QAAAxM,EAAAyM,EAAA","file":"static/js/0.c8e34372.chunk.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 166:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_header_header__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__search_scss__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__search_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__search_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_redux__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__store_search_action__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__config_api__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils_utils__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__player_player__ = __webpack_require__(170);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Search=function(_Component){_inherits(Search,_Component);function Search(props){_classCallCheck(this,Search);var _this=_possibleConstructorReturn(this,(Search.__proto__||Object.getPrototypeOf(Search)).call(this,props));_this.handleChange=function(e){_this.setState({keyword:Object(__WEBPACK_IMPORTED_MODULE_8__utils_utils__[\"e\" /* trim */])(e.target.value)});};_this.enter=function(e){if(_this.state.keyword){_this.setState({isShowDelete:true});// this.isShowDelete = true;\n}else{_this.setState({isShowDelete:false});// this.isShowDelete = false;\n_this.reset();}if(e.keyCode!==13)return;_this.setState({isShowHistory:false,isShowSearchResults:true});// this.isShowHistory = false;\n// this.isShowSearchResults = true;\n_this.addHistory(_this.state.keyword);_this.search(_this.state.keyword);};_this.onClick=function(e){//如果点击到了输入按钮\nif(e.target.matches('#search')){_this.setState({isShowCancel:true,isShowHistory:true});// this.isShowCancel = true;\n// this.isShowHistory = true;\n}//如果点击到了取消按钮\nif(e.target.matches('.search-cancel')){_this.setState({isShowCancel:false,isShowDelete:false,isShowHistory:false});// this.isShowCancel = false;\n// this.isShowDelete = false;\n// this.isShowHistory = false;\n_this.reset();}//如果点击到了删除按钮\nif(e.target.matches('.icon-delete')){// this.isShowDelete = false;\n_this.setState({isShowDelete:false});_this.reset();}// 如果匹配到了清除搜索记录\nif(e.target.matches('.record-delete')){var history=[];// this.history = [];\nlocalStorage.setItem('SET_HISTORY_KEY',history);_this.setState({history:history});}//如果匹配到了单条记录的删除按钮\nif(e.target.matches('.icon.icon-close')){var _history=_this.state.history;var index=_history.indexOf(e.target.previousElementSibling.innerHTML);_history.splice(index,1);localStorage.setItem('SET_HISTORY_KEY',_history);_this.setState({history:_history});}//如果点到了热门搜索的关键词或者点到了搜索记录的歌\nif(e.target.matches('.tag-keyword')||e.target.matches('.record-con')){// this.isShowDelete = true;\n// this.isShowCancel = true;\n// this.isShowHistory = false;\n// this.isShowSearchResults = true;\n_this.setState({keyword:Object(__WEBPACK_IMPORTED_MODULE_8__utils_utils__[\"e\" /* trim */])(e.target.innerHTML),isShowDelete:true,isShowCancel:true,isShowHistory:false,isShowSearchResults:true},function(){_this.addHistory(_this.state.keyword);_this.search(_this.state.keyword);});}};_this.showPlayerDetail=function(list){console.log(list);_this.props.showPlayer();_this.props.getSong(Object.assign({},list));};_this.state={hotkeys:[],//获取黑色的 hotkey,\nhistory:[],// 放历史记录\ndata:'',//获取红色的 hotkey\nkeyword:'',// 获取用户的搜索内容\ngetLastKeyword:'',// 获取用户上一次的搜索内容\nsearchResult:[],//搜索结果\nisShowCancel:false,// 是否显示取消\nisShowDelete:false,// 是否显示取消\nisShowHistory:false,// 是否显示历史记录\nisShowSearchResults:false,//是否显示搜索结果\nfetching:false,//正在 fetch\nisLoad:true,//能否继续加载数据\nisGetHotKey:false// 是否获得 hotkey\n};// this.isGetHotKey = false; // 是否获得 hotkey\n_this.songsObject={};// 存放歌曲,用来判断是否搜索改变了\n_this.page=1;//默认页数为1\n// this.isShowCancel = false; // 是否显示取消\n// this.isShowDelete = false; // 是否显示取消\n// this.isShowHistory = false; // 是否显示历史记录\n// this.isShowSearchResults = false; //是否显示搜索结果\n// this.fetching = false; //正在 fetch\n// this.isLoad = true; //能否继续加载数据\n//this.history = []; // 放历史记录\nreturn _this;}_createClass(Search,[{key:'componentDidMount',value:function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){var history;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:window.addEventListener('scroll',this.onScroll.bind(this));_context.next=3;return this.props.getHotList();case 3:history=localStorage.getItem('SET_HISTORY_KEY')?localStorage.getItem('SET_HISTORY_KEY').split(','):[];this.setState({isGetHotKey:true,history:history});// this.isGetHotKey = true;\n// this.history = history;\nif(this.props.hotkeys){this.setState({hotkeys:this.shuffle(this.props.hotkeys.hotkey,6),data:this.props.hotkeys});}case 6:case'end':return _context.stop();}}},_callee,this);}));function componentDidMount(){return _ref.apply(this,arguments);}return componentDidMount;}()// 洗牌\n},{key:'shuffle',value:function shuffle(array,count){var arr=[];var len=Math.min(count,array.length);for(var i=0;i<len;i++){var temp=array;var random=Math.floor(Math.random()*temp.length);arr[i]=temp[random];array.splice(random,1);}return arr;}// 重置\n},{key:'reset',value:function reset(){this.page=1;this.songsObject={};this.setState({searchResult:[],isLoad:true});// this.searchResult = [];\n}// 添加历史\n},{key:'addHistory',value:function addHistory(keyword){if(keyword){var history=this.state.history;var index=history.indexOf(keyword);if(index===-1){history.unshift(keyword);localStorage.setItem('SET_HISTORY_KEY',history);console.log(history);this.setState({history:history});}}}// 用户按下 enter\n},{key:'componentWillUnmount',value:function componentWillUnmount(){this.setState=function(state,callback){return;};window.removeEventListener('scroll',this.onScroll.bind(this));}// 搜索\n},{key:'search',value:function(){var _ref2=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2(keyword){var page=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var res,result;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://刚进来时 keyword为 undefined ，因为没有 enter\nif(keyword===undefined)keyword='';if(!(keyword==='')){_context2.next=3;break;}return _context2.abrupt('return');case 3:if(!(this.state.getLastKeyword===keyword&&this.songsObject[page||this.page])){_context2.next=5;break;}return _context2.abrupt('return');case 5:if(this.state.getLastKeyword!==keyword)this.reset();if(!(this.state.fetching||!this.state.isLoad)){_context2.next=8;break;}return _context2.abrupt('return');case 8:this.setState({getLastKeyword:keyword});this.loading();_context2.next=12;return __WEBPACK_IMPORTED_MODULE_7__config_api__[\"d\" /* default */].searchList(keyword,page||this.page);case 12:res=_context2.sent;this.page=res.song.curpage;this.songsObject[this.page]=res.song.list;if(this.state.searchResult){result=this.state.searchResult;this.setState({searchResult:result.concat(res.song.list)});// this.searchResult = this.searchResult.concat(res.song.list);\n}else{this.setState({searchResult:res.song.list});// this.searchResult = res.song.list;\n}// this.isLoad = res.message !== 'no results';\nthis.setState({isLoad:res.message!=='no results'});this.accomplish();case 18:case'end':return _context2.stop();}}},_callee2,this);}));function search(_x2){return _ref2.apply(this,arguments);}return search;}()// 全部渲染完成，没有歌了\n},{key:'accomplish',value:function accomplish(){this.setState({fetching:false});// this.fetching = false;\n}// 显示正在加载动画\n},{key:'loading',value:function loading(){this.setState({fetching:true});// this.fetching = true;\n}// 滚动事件\n},{key:'onScroll',value:function onScroll(e){if(this.state.isLoad){if(document.documentElement.clientHeight+window.pageYOffset>document.body.scrollHeight-100){this.search(this.state.keyword,this.page+1);}}else{return window.removeEventListener('scroll',this.onScroll.bind(this));}}// 显示 player 的信息\n},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3__components_header_header__[\"a\" /* default */],null),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'tab-contents'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-view tab-content',onClick:this.onClick},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-bar'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'input-wrap'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('input',{type:'text',id:'search',placeholder:'\\u641C\\u7D22\\u6B4C\\u66F2\\u3001\\u6B4C\\u5355\\u3001\\u4E13\\u8F91',onChange:this.handleChange,onKeyUp:this.enter,value:this.state.keyword}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:'icon-search'}),this.state.isShowDelete?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:'icon-delete'},'\\u5220\\u9664'):null),this.state.isShowCancel?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-cancel'},'\\u53D6\\u6D88'):null),this.state.history.length>0&&this.state.isShowHistory?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'record-keys'},this.state.history.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('li',{key:index},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'record-main'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:'icon icon-clock'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:'record-con ellipsis'},item),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:'icon icon-close'})));}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('p',{className:'record-delete'},'\\u6E05\\u9664\\u641C\\u7D22\\u8BB0\\u5F55')):null,this.state.isShowSearchResults?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-results'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-list'},this.state.searchResult.map(function(list){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-item',key:list.songid,onClick:_this2.showPlayerDetail.bind(_this2,list)},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('i',{className:'icon icon-music'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-name'},Object(__WEBPACK_IMPORTED_MODULE_8__utils_utils__[\"d\" /* htmlDecode */])(list.songname)),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-artist'},list.singer.map(function(artist,index){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{key:index},Object(__WEBPACK_IMPORTED_MODULE_8__utils_utils__[\"d\" /* htmlDecode */])(artist.name)+' ');})));})),this.state.fetching?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-loading show'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('i',{className:'loading-icon'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'loading-text'},'\\u6B63\\u5728\\u8F7D\\u5165\\u66F4\\u591A...')):null,this.state.isLoad?null:__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-loading show'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'loading-done'},'\\u5DF2\\u52A0\\u8F7D\\u5168\\u90E8'))):null,!this.state.isShowHistory&&!this.state.isShowSearchResults?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'mod-search-result',id:'hot-keys'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('h3',{className:'result-tit'},'\\u70ED\\u95E8\\u641C\\u7D22'),this.state.isGetHotKey?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'result-tags'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('a',{href:this.state.data.special_url,className:'tag tag-hot'},this.state.data.special_key),this.state.hotkeys.map(function(hotkey){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'tag tag-keyword',key:hotkey.n},hotkey.k);})):__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'search-loading show'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('i',{className:'loading-icon'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'loading-text'},'\\u6B63\\u5728\\u52A0\\u8F7D...'))):null),this.props.isShowPlayer?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__player_player__[\"a\" /* default */],null):null));}}]);return Search;}(__WEBPACK_IMPORTED_MODULE_1_react__[\"Component\"]);Search.propTypes={getHotList:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.func.isRequired,hotkeys:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.object.isRequired};/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_5_react_redux__[\"b\" /* connect */])(function(state){return{hotkeys:state.getData.hotkeys,isShowPlayer:state.getData.isShowPlayer};},{getHotList:__WEBPACK_IMPORTED_MODULE_6__store_search_action__[\"b\" /* getHotList */],showPlayer:__WEBPACK_IMPORTED_MODULE_6__store_search_action__[\"e\" /* showPlayer */],getSong:__WEBPACK_IMPORTED_MODULE_6__store_search_action__[\"c\" /* getSong */]})(Search));\n\n/***/ }),\n\n/***/ 167:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return getHotList; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return showPlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cancelPlayer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return getSong; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return setPlayState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__action_type__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config_api__ = __webpack_require__(9);\nvar _this=this;function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}// 获取热门搜索关键词\nvar getHotList=function getHotList(){return function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(dispatch){var result;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return __WEBPACK_IMPORTED_MODULE_2__config_api__[\"d\" /* default */].hotList();case 3:result=_context.sent;dispatch({type:__WEBPACK_IMPORTED_MODULE_1__action_type__[\"b\" /* GET_HOT_LIST */],data:result});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context['catch'](0);throw _context.t0;case 10:case'end':return _context.stop();}}},_callee,_this,[[0,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();};// 显示 player\nvar showPlayer=function showPlayer(){return{type:__WEBPACK_IMPORTED_MODULE_1__action_type__[\"e\" /* SHOW_PLAYER */],isShowPlayer:true};};// 隐藏 player\nvar cancelPlayer=function cancelPlayer(){return{type:__WEBPACK_IMPORTED_MODULE_1__action_type__[\"a\" /* CANCEL_PLAYER */],isShowPlayer:false};};// 获取歌手\nvar getSong=function getSong(list){return function(dispatch){var artists='';list.singer.forEach(function(singer){artists+=singer.name;});dispatch({type:__WEBPACK_IMPORTED_MODULE_1__action_type__[\"c\" /* GET_SONG */],song:list,artist:artists});};};// 设置播放状态\nvar setPlayState=function setPlayState(status){return{type:__WEBPACK_IMPORTED_MODULE_1__action_type__[\"d\" /* SET_PLAYING_STATE */],isPlay:status};};\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/search.21bc8c32.scss\";\n\n/***/ }),\n\n/***/ 170:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__player_scss__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__player_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__player_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react_redux__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__config_utils__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_utils__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__config_api__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__store_search_action__ = __webpack_require__(167);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value;}catch(error){reject(error);return;}if(info.done){resolve(value);}else{return Promise.resolve(value).then(function(value){step(\"next\",value);},function(err){step(\"throw\",err);});}}return step(\"next\");});};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var Player=function(_Component){_inherits(Player,_Component);function Player(props){_classCallCheck(this,Player);var _this2=_possibleConstructorReturn(this,(Player.__proto__||Object.getPrototypeOf(Player)).call(this,props));_this2.onPlay=function(){_this2.isplay=!_this2.isplay;// 如果是 play\nif(_this2.isplay){if(_this2.state.fetching)return;_this2.refs.$audio.play();_this2.props.setPlayState(true);_this2.startLyrics();_this2.startProgress();}else{// 如果是 pause\n_this2.refs.$audio.pause();_this2.props.setPlayState(false);// 设置 play 的状态\n_this2.pauseLyrics();_this2.pauseProgress();}};_this2.exit=function(){_this2.props.cancelPlayer();_this2.props.setPlayState(false);document.body.classList.remove('noscroll');};_this2.state={fetching:false,// 是否正在加载\nduration:_this2.props.song.interval,//持续时间\nprogressIntervalId:0,// 进度条setInterval 返回的 id\nlyrics:[],//歌词\nindex:0,// 歌词页数\nprogress:0,//进度条\nelapsed:0//当前时间\n};_this2.isplay=false;// 是否 play\n_this2.lyricIntervalId=0;// 歌词setInterval 返回的 id\n_this2.LINE_HEIGHT=42;// 歌词的高度\nreturn _this2;}_createClass(Player,[{key:'componentDidMount',value:function(){var _ref=_asyncToGenerator(/*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(){var res;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:document.body.classList.add('noscroll');this.setState({fetching:true});_context.next=4;return __WEBPACK_IMPORTED_MODULE_7__config_api__[\"d\" /* default */].getLyrics(this.props.song.songid);case 4:res=_context.sent;this.setState({index:0,lyrics:Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"d\" /* htmlDecode */])(res.lyric).match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm)});this.setState({fetching:false});console.log(res);case 8:case'end':return _context.stop();}}},_callee,this);}));function componentDidMount(){return _ref.apply(this,arguments);}return componentDidMount;}()// 播放音频\n},{key:'startLyrics',// 开始歌词\nvalue:function startLyrics(){this.pauseLyrics();this.lyricIntervalId=setInterval(this.updateLyrics.bind(this),1000);}// 暂停歌词\n},{key:'pauseLyrics',value:function pauseLyrics(){clearInterval(this.lyricIntervalId);}//更新歌词\n},{key:'updateLyrics',value:function updateLyrics(){var _this=this;if(this.refs.$audio&&this.refs.$audio.ontimeupdate){this.refs.$audio.ontimeupdate=function(e){for(var i=0,l=_this.state.lyrics.length;i<l;i++){if(_this.refs.$audio.currentTime/*当前播放的时间*/>Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"c\" /* getSeconds */])(_this.state.lyrics[i])-0.5){_this.refs.$lyricsLines.children[_this.state.index].classList.remove('active');_this.refs.$lyricsLines.children[i].classList.add('active');_this.state.index=i;}}};if(this.state.index>2){var y=-(this.state.index-2)*this.LINE_HEIGHT;this.refs.$lyricsLines.style.transform='translateY('+y+'px)';}}}// 重置歌词\n},{key:'resetLyrics',value:function resetLyrics(){this.pauseLyrics();this.refs.$lyricsLines.children[this.index].classList.remove('active');this.setState({index:0});// this.index = 0;\nthis.refs.$lyricsLines.style.transform='translateY(0)';if(this.state.lyrics.length){this.refs.$lyricsLines.children[this.state.index].classList.add('active');}}// 重新开始歌词\n},{key:'restartLyrics',value:function restartLyrics(){this.resetLyrics();this.startLyrics();}// 当一首歌播放结束的时候重新播放\n},{key:'onEnd',value:function onEnd(){this.refs.$audio.play();this.restartProgress();this.restartLyrics();}// 启动进度条\n},{key:'startProgress',value:function startProgress(){this.pauseProgress();this.progressIntervalId=setInterval(this.updateProgress.bind(this),50);}// 暂停进度条\n},{key:'pauseProgress',value:function pauseProgress(){clearInterval(this.progressIntervalId);}// 更新进度条\n},{key:'updateProgress',value:function updateProgress(){var _this3=this;this.setState({elapsed:this.state.elapsed+0.05},function(){_this3.setState({progress:_this3.state.elapsed/_this3.state.duration});});// this.elapsed += 0.05;\n// this.progress = this.elapsed / this.duration;\nthis.refs.$progress.style.transform='translateX('+(this.state.progress*100-100)+'%)';}//重置进度条\n},{key:'resetProgress',value:function resetProgress(duration){var $progress=this.pauseProgress();this.setState({elapsed:0,progress:0});// this.elapsed = 0;\n// this.progress = 0;\nthis.refs.$progress.style.transform='translate(-100%)';if(duration){this.setState({duration:+duration});// this.duration = +duration;\n}}// 重新开始进度条\n},{key:'restartProgress',value:function restartProgress(){this.resetProgress();this.startProgress();}//退出 player\n},{key:'componentWillUnmount',value:function componentWillUnmount(){this.pauseLyrics();this.pauseProgress();this.setState=function(state,callback){return;};}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{id:'player',className:'show'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-container'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-header'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('img',{src:Object(__WEBPACK_IMPORTED_MODULE_5__config_utils__[\"a\" /* albumCoverUrl */])(this.props.song.albummid),alt:'\\u56FE\\u7247',className:'album-cover'}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-info'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-name'},Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"d\" /* htmlDecode */])(this.props.song.songname)),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'song-artist'},Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"d\" /* htmlDecode */])(this.props.artist))),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('span',{className:this.props.isPlay?'icon-action icon-play icon-pause':'icon-action icon-play icon-play',onClick:this.onPlay})),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-lyrics'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-lyrics-lines',ref:'$lyricsLines'},this.state.lyrics!==0?this.state.lyrics.map(function(list,index){// console.log(list);\nreturn __WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-lyrics-line',key:index},list.slice(10));}):null,this.state.fetching?__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-lyrics-line'},'\\u6B63\\u5728\\u52A0\\u8F7D\\u6B4C\\u8BCD,\\u8BF7\\u7B49\\u5F85...'):null)),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-footer'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'icon-list',onClick:this.exit}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'progress'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'progress-time progress-elapsed'},Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"b\" /* formatTime */])(this.state.elapsed)),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'progress-bar'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'progress-bar-progress',ref:'$progress'})),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'progress-time progress-duration'},Object(__WEBPACK_IMPORTED_MODULE_6__utils_utils__[\"b\" /* formatTime */])(this.props.song.interval))),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'action'},__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('a',{href:'#',className:'btn-download'},'\\u4E0B\\u8F7D\\u8FD9\\u9996\\u6B4C')))),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('div',{className:'player-background',style:{backgroundImage:'url('+Object(__WEBPACK_IMPORTED_MODULE_5__config_utils__[\"a\" /* albumCoverUrl */])(this.props.song.albummid)+')'}}),__WEBPACK_IMPORTED_MODULE_1_react___default.a.createElement('audio',{src:Object(__WEBPACK_IMPORTED_MODULE_5__config_utils__[\"d\" /* songUrl */])(this.props.song.songmid),ref:'$audio',onEnded:this.onEnd}));}}]);return Player;}(__WEBPACK_IMPORTED_MODULE_1_react__[\"Component\"]);Player.propTypes={song:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.object.isRequired,artist:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.string.isRequired,isPlay:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.bool.isRequired};/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_4_react_redux__[\"b\" /* connect */])(function(state){return{song:state.getData.song,artist:state.getData.artist,isPlay:state.getData.isPlay};},{setPlayState:__WEBPACK_IMPORTED_MODULE_8__store_search_action__[\"d\" /* setPlayState */],cancelPlayer:__WEBPACK_IMPORTED_MODULE_8__store_search_action__[\"a\" /* cancelPlayer */]})(Player));\n\n/***/ }),\n\n/***/ 171:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/player.753dd1f0.scss\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/0.c8e34372.chunk.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../../components/header/header';\nimport './search.scss';\nimport { connect } from 'react-redux';\nimport { getHotList, showPlayer, getSong } from '../../store/search/action';\nimport API from '../../config/api';\nimport { trim, htmlDecode } from '../../utils/utils';\nimport Player from '../player/player';\n\nclass Search extends Component {\n    static propTypes = {\n        getHotList: PropTypes.func.isRequired,\n        hotkeys: PropTypes.object.isRequired\n    };\n    constructor(props) {\n        super(props);\n        this.state = {\n            hotkeys: [], //获取黑色的 hotkey,\n            history: [], // 放历史记录\n            data: '', //获取红色的 hotkey\n            keyword: '', // 获取用户的搜索内容\n            getLastKeyword: '', // 获取用户上一次的搜索内容\n            searchResult: [], //搜索结果\n            isShowCancel: false, // 是否显示取消\n            isShowDelete: false, // 是否显示取消\n            isShowHistory: false, // 是否显示历史记录\n            isShowSearchResults: false, //是否显示搜索结果\n            fetching: false, //正在 fetch\n            isLoad: true, //能否继续加载数据\n            isGetHotKey: false // 是否获得 hotkey\n        };\n        // this.isGetHotKey = false; // 是否获得 hotkey\n        this.songsObject = {}; // 存放歌曲,用来判断是否搜索改变了\n        this.page = 1; //默认页数为1\n        // this.isShowCancel = false; // 是否显示取消\n        // this.isShowDelete = false; // 是否显示取消\n        // this.isShowHistory = false; // 是否显示历史记录\n        // this.isShowSearchResults = false; //是否显示搜索结果\n        // this.fetching = false; //正在 fetch\n        // this.isLoad = true; //能否继续加载数据\n        //this.history = []; // 放历史记录\n    }\n    async componentDidMount() {\n        window.addEventListener('scroll', this.onScroll.bind(this));\n        await this.props.getHotList();\n        const history = localStorage.getItem('SET_HISTORY_KEY')\n            ? localStorage.getItem('SET_HISTORY_KEY').split(',')\n            : [];\n        this.setState({ isGetHotKey: true, history: history });\n        // this.isGetHotKey = true;\n        // this.history = history;\n        if (this.props.hotkeys) {\n            this.setState({\n                hotkeys: this.shuffle(this.props.hotkeys.hotkey, 6),\n                data: this.props.hotkeys\n            });\n        }\n    }\n\n    // 洗牌\n    shuffle(array, count) {\n        let arr = [];\n        let len = Math.min(count, array.length);\n        for (let i = 0; i < len; i++) {\n            let temp = array;\n            let random = Math.floor(Math.random() * temp.length);\n            arr[i] = temp[random];\n            array.splice(random, 1);\n        }\n        return arr;\n    }\n\n    // 重置\n    reset() {\n        this.page = 1;\n        this.songsObject = {};\n        this.setState({ searchResult: [], isLoad: true });\n        // this.searchResult = [];\n    }\n\n    // 添加历史\n    addHistory(keyword) {\n        if (keyword) {\n            let history = this.state.history;\n            let index = history.indexOf(keyword);\n            if (index === -1) {\n                history.unshift(keyword);\n                localStorage.setItem('SET_HISTORY_KEY', history);\n                console.log(history);\n                this.setState({ history: history });\n            }\n        }\n    }\n\n    handleChange = e => {\n        this.setState({\n            keyword: trim(e.target.value)\n        });\n    };\n\n    // 用户按下 enter\n    enter = e => {\n        if (this.state.keyword) {\n            this.setState({ isShowDelete: true });\n            // this.isShowDelete = true;\n        } else {\n            this.setState({ isShowDelete: false });\n            // this.isShowDelete = false;\n            this.reset();\n        }\n        if (e.keyCode !== 13) return;\n        this.setState({\n            isShowHistory: false,\n            isShowSearchResults: true\n        });\n        // this.isShowHistory = false;\n        // this.isShowSearchResults = true;\n        this.addHistory(this.state.keyword);\n        this.search(this.state.keyword);\n    };\n\n    onClick = e => {\n        //如果点击到了输入按钮\n        if (e.target.matches('#search')) {\n            this.setState({\n                isShowCancel: true,\n                isShowHistory: true\n            });\n            // this.isShowCancel = true;\n            // this.isShowHistory = true;\n        }\n        //如果点击到了取消按钮\n        if (e.target.matches('.search-cancel')) {\n            this.setState({ isShowCancel: false, isShowDelete: false, isShowHistory: false });\n            // this.isShowCancel = false;\n            // this.isShowDelete = false;\n            // this.isShowHistory = false;\n            this.reset();\n        }\n        //如果点击到了删除按钮\n        if (e.target.matches('.icon-delete')) {\n            // this.isShowDelete = false;\n            this.setState({ isShowDelete: false });\n            this.reset();\n        }\n        // 如果匹配到了清除搜索记录\n        if (e.target.matches('.record-delete')) {\n            let history = [];\n            // this.history = [];\n            localStorage.setItem('SET_HISTORY_KEY', history);\n            this.setState({ history: history });\n        }\n        //如果匹配到了单条记录的删除按钮\n        if (e.target.matches('.icon.icon-close')) {\n            let history = this.state.history;\n            let index = history.indexOf(e.target.previousElementSibling.innerHTML);\n            history.splice(index, 1);\n            localStorage.setItem('SET_HISTORY_KEY', history);\n            this.setState({ history: history });\n        }\n        //如果点到了热门搜索的关键词或者点到了搜索记录的歌\n        if (e.target.matches('.tag-keyword') || e.target.matches('.record-con')) {\n            // this.isShowDelete = true;\n            // this.isShowCancel = true;\n            // this.isShowHistory = false;\n            // this.isShowSearchResults = true;\n            this.setState(\n                {\n                    keyword: trim(e.target.innerHTML),\n                    isShowDelete: true,\n                    isShowCancel: true,\n                    isShowHistory: false,\n                    isShowSearchResults: true\n                },\n                () => {\n                    this.addHistory(this.state.keyword);\n                    this.search(this.state.keyword);\n                }\n            );\n        }\n    };\n\n    componentWillUnmount() {\n        this.setState = (state, callback) => {\n            return;\n        };\n        window.removeEventListener('scroll', this.onScroll.bind(this));\n    }\n\n    // 搜索\n    async search(keyword, page = 1) {\n        //刚进来时 keyword为 undefined ，因为没有 enter\n        if (keyword === undefined) keyword = '';\n        if (keyword === '') return;\n        //如果已经搜索过，并且没有改动 keyword 那么直接返回\n        if (this.state.getLastKeyword === keyword && this.songsObject[page || this.page]) return;\n        if (this.state.getLastKeyword !== keyword) this.reset();\n        if (this.state.fetching || !this.state.isLoad) return;\n        this.setState({ getLastKeyword: keyword });\n        this.loading();\n        let res = await API.searchList(keyword, page || this.page);\n        this.page = res.song.curpage;\n        this.songsObject[this.page] = res.song.list;\n        if (this.state.searchResult) {\n            let result = this.state.searchResult;\n            this.setState({ searchResult: result.concat(res.song.list) });\n            // this.searchResult = this.searchResult.concat(res.song.list);\n        } else {\n            this.setState({ searchResult: res.song.list });\n            // this.searchResult = res.song.list;\n        }\n        // this.isLoad = res.message !== 'no results';\n        this.setState({ isLoad: res.message !== 'no results' });\n        this.accomplish();\n    }\n\n    // 全部渲染完成，没有歌了\n    accomplish() {\n        this.setState({ fetching: false });\n        // this.fetching = false;\n    }\n\n    // 显示正在加载动画\n    loading() {\n        this.setState({ fetching: true });\n        // this.fetching = true;\n    }\n\n    // 滚动事件\n    onScroll(e) {\n        if (this.state.isLoad) {\n            if (\n                document.documentElement.clientHeight + window.pageYOffset >\n                document.body.scrollHeight - 100\n            ) {\n                this.search(this.state.keyword, this.page + 1);\n            }\n        } else {\n            return window.removeEventListener('scroll', this.onScroll.bind(this));\n        }\n    }\n\n    // 显示 player 的信息\n    showPlayerDetail = list => {\n        console.log(list);\n        this.props.showPlayer();\n        this.props.getSong({ ...list });\n    };\n\n    render() {\n        return (\n            <div>\n                <Header />\n                <div className=\"tab-contents\">\n                    <div className=\"search-view tab-content\" onClick={this.onClick}>\n                        <div className=\"search-bar\">\n                            <div className=\"input-wrap\">\n                                <input\n                                    type=\"text\"\n                                    id=\"search\"\n                                    placeholder=\"搜索歌曲、歌单、专辑\"\n                                    onChange={this.handleChange}\n                                    onKeyUp={this.enter}\n                                    value={this.state.keyword}\n                                />\n                                <span className=\"icon-search\" />\n                                {this.state.isShowDelete ? (\n                                    <span className=\"icon-delete\">删除</span>\n                                ) : null}\n                            </div>\n                            {this.state.isShowCancel ? (\n                                <div className=\"search-cancel\">取消</div>\n                            ) : null}\n                        </div>\n                        {this.state.history.length > 0 && this.state.isShowHistory ? (\n                            <div className=\"record-keys\">\n                                {this.state.history.map((item, index) => {\n                                    return (\n                                        <li key={index}>\n                                            <div className=\"record-main\">\n                                                <span className=\"icon icon-clock\" />\n                                                <span className=\"record-con ellipsis\">{item}</span>\n                                                <span className=\"icon icon-close\" />\n                                            </div>\n                                        </li>\n                                    );\n                                })}\n                                <p className=\"record-delete\">清除搜索记录</p>\n                            </div>\n                        ) : null}\n                        {this.state.isShowSearchResults ? (\n                            <div className=\"search-results\">\n                                <div className=\"song-list\">\n                                    {this.state.searchResult.map(list => {\n                                        return (\n                                            <div\n                                                className=\"song-item\"\n                                                key={list.songid}\n                                                onClick={this.showPlayerDetail.bind(this, list)}\n                                            >\n                                                <i className=\"icon icon-music\" />\n                                                <div className=\"song-name\">\n                                                    {htmlDecode(list.songname)}\n                                                </div>\n                                                <div className=\"song-artist\">\n                                                    {list.singer.map((artist, index) => {\n                                                        return (\n                                                            <span key={index}>\n                                                                {htmlDecode(artist.name) + ' '}\n                                                            </span>\n                                                        );\n                                                    })}\n                                                </div>\n                                            </div>\n                                        );\n                                    })}\n                                </div>\n                                {this.state.fetching ? (\n                                    <div className=\"search-loading show\">\n                                        <i className=\"loading-icon\" />\n                                        <div className=\"loading-text\">正在载入更多...</div>\n                                    </div>\n                                ) : null}\n                                {this.state.isLoad ? null : (\n                                    <div className=\"search-loading show\">\n                                        <div className=\"loading-done\">已加载全部</div>\n                                    </div>\n                                )}\n                            </div>\n                        ) : null}\n                        {!this.state.isShowHistory && !this.state.isShowSearchResults ? (\n                            <div className=\"mod-search-result\" id=\"hot-keys\">\n                                <h3 className=\"result-tit\">热门搜索</h3>\n                                {this.state.isGetHotKey ? (\n                                    <div className=\"result-tags\">\n                                        <a\n                                            href={this.state.data.special_url}\n                                            className=\"tag tag-hot\"\n                                        >\n                                            {this.state.data.special_key}\n                                        </a>\n                                        {this.state.hotkeys.map(hotkey => {\n                                            return (\n                                                <div className=\"tag tag-keyword\" key={hotkey.n}>\n                                                    {hotkey.k}\n                                                </div>\n                                            );\n                                        })}\n                                    </div>\n                                ) : (\n                                    <div className=\"search-loading show\">\n                                        <i className=\"loading-icon\" />\n                                        <div className=\"loading-text\">正在加载...</div>\n                                    </div>\n                                )}\n                            </div>\n                        ) : null}\n                    </div>\n                    {this.props.isShowPlayer ? <Player /> : null}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect(\n    state => ({\n        hotkeys: state.getData.hotkeys,\n        isShowPlayer: state.getData.isShowPlayer\n    }),\n    {\n        getHotList,\n        showPlayer,\n        getSong\n    }\n)(Search);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.jsx","import * as search from './action-type';\nimport API from '../../config/api';\n\n// 获取热门搜索关键词\nexport const getHotList = () => {\n    return async dispatch => {\n        try {\n            let result = await API.hotList();\n            dispatch({\n                type: search.GET_HOT_LIST,\n                data: result\n            });\n        } catch (err) {\n            throw err;\n        }\n    };\n};\n\n// 显示 player\nexport const showPlayer = () => {\n    return {\n        type: search.SHOW_PLAYER,\n        isShowPlayer: true\n    };\n};\n\n// 隐藏 player\nexport const cancelPlayer = () => {\n    return {\n        type: search.CANCEL_PLAYER,\n        isShowPlayer: false\n    };\n};\n\n// 获取歌手\nexport const getSong = list => {\n    return dispatch => {\n        let artists = '';\n        list.singer.forEach(singer => {\n            artists += singer.name;\n        });\n        dispatch({\n            type: search.GET_SONG,\n            song: list,\n            artist: artists\n        });\n    };\n};\n\n// 设置播放状态\nexport const setPlayState = status => {\n    return {\n        type: search.SET_PLAYING_STATE,\n        isPlay: status\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/search/action.js","module.exports = __webpack_public_path__ + \"static/media/search.21bc8c32.scss\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/search/search.scss\n// module id = 169\n// module chunks = 0","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport './player.scss';\nimport { connect } from 'react-redux';\nimport { albumCoverUrl, songUrl } from '../../config/utils';\nimport { htmlDecode, formatTime, getSeconds } from '../../utils/utils';\nimport API from '../../config/api';\nimport { setPlayState, cancelPlayer } from '../../store/search/action';\n\nclass Player extends Component {\n    static propTypes = {\n        song: PropTypes.object.isRequired,\n        artist: PropTypes.string.isRequired,\n        isPlay: PropTypes.bool.isRequired\n    };\n    constructor(props) {\n        super(props);\n        this.state = {\n            fetching: false, // 是否正在加载\n            duration: this.props.song.interval, //持续时间\n            progressIntervalId: 0, // 进度条setInterval 返回的 id\n            lyrics: [], //歌词\n            index: 0, // 歌词页数\n            progress: 0, //进度条\n            elapsed: 0 //当前时间\n        };\n        this.isplay = false; // 是否 play\n        this.lyricIntervalId = 0; // 歌词setInterval 返回的 id\n        this.LINE_HEIGHT = 42; // 歌词的高度\n    }\n    async componentDidMount() {\n        document.body.classList.add('noscroll');\n        this.setState({ fetching: true });\n        let res = await API.getLyrics(this.props.song.songid);\n        this.setState({\n            index: 0,\n            lyrics: htmlDecode(res.lyric).match(/^\\[\\d{2}:\\d{2}.\\d{2}\\](.+)$/gm)\n        });\n        this.setState({ fetching: false });\n        console.log(res);\n    }\n\n    // 播放音频\n    onPlay = () => {\n        this.isplay = !this.isplay;\n        // 如果是 play\n        if (this.isplay) {\n            if (this.state.fetching) return;\n            this.refs.$audio.play();\n            this.props.setPlayState(true);\n            this.startLyrics();\n            this.startProgress();\n        } else {\n            // 如果是 pause\n            this.refs.$audio.pause();\n            this.props.setPlayState(false); // 设置 play 的状态\n            this.pauseLyrics();\n            this.pauseProgress();\n        }\n    };\n\n    // 开始歌词\n    startLyrics() {\n        this.pauseLyrics();\n        this.lyricIntervalId = setInterval(this.updateLyrics.bind(this), 1000);\n    }\n    // 暂停歌词\n    pauseLyrics() {\n        clearInterval(this.lyricIntervalId);\n    }\n\n    //更新歌词\n    updateLyrics() {\n        let _this = this;\n        if (this.refs.$audio && this.refs.$audio.ontimeupdate) {\n            this.refs.$audio.ontimeupdate = function(e) {\n                for (let i = 0, l = _this.state.lyrics.length; i < l; i++) {\n                    if (\n                        _this.refs.$audio.currentTime /*当前播放的时间*/ >\n                        getSeconds(_this.state.lyrics[i]) - 0.5\n                    ) {\n                        _this.refs.$lyricsLines.children[_this.state.index].classList.remove(\n                            'active'\n                        );\n                        _this.refs.$lyricsLines.children[i].classList.add('active');\n                        _this.state.index = i;\n                    }\n                }\n            };\n            if (this.state.index > 2) {\n                let y = -(this.state.index - 2) * this.LINE_HEIGHT;\n                this.refs.$lyricsLines.style.transform = `translateY(${y}px)`;\n            }\n        }\n    }\n\n    // 重置歌词\n    resetLyrics() {\n        this.pauseLyrics();\n        this.refs.$lyricsLines.children[this.index].classList.remove('active');\n        this.setState({ index: 0 });\n        // this.index = 0;\n        this.refs.$lyricsLines.style.transform = `translateY(0)`;\n        if (this.state.lyrics.length) {\n            this.refs.$lyricsLines.children[this.state.index].classList.add('active');\n        }\n    }\n    // 重新开始歌词\n    restartLyrics() {\n        this.resetLyrics();\n        this.startLyrics();\n    }\n\n    // 当一首歌播放结束的时候重新播放\n    onEnd() {\n        this.refs.$audio.play();\n        this.restartProgress();\n        this.restartLyrics();\n    }\n\n    // 启动进度条\n    startProgress() {\n        this.pauseProgress();\n        this.progressIntervalId = setInterval(this.updateProgress.bind(this), 50);\n    }\n    // 暂停进度条\n    pauseProgress() {\n        clearInterval(this.progressIntervalId);\n    }\n    // 更新进度条\n    updateProgress() {\n        this.setState(\n            {\n                elapsed: this.state.elapsed + 0.05\n            },\n            () => {\n                this.setState({\n                    progress: this.state.elapsed / this.state.duration\n                });\n            }\n        );\n        // this.elapsed += 0.05;\n        // this.progress = this.elapsed / this.duration;\n        this.refs.$progress.style.transform = `translateX(${this.state.progress * 100 - 100}%)`;\n    }\n    //重置进度条\n    resetProgress(duration) {\n        let $progress = this.pauseProgress();\n        this.setState({\n            elapsed: 0,\n            progress: 0\n        })\n        // this.elapsed = 0;\n        // this.progress = 0;\n        this.refs.$progress.style.transform = 'translate(-100%)';\n        if (duration) {\n            this.setState({\n                duration: +duration\n            })\n            // this.duration = +duration;\n        }\n    }\n    // 重新开始进度条\n    restartProgress() {\n        this.resetProgress();\n        this.startProgress();\n    }\n\n    //退出 player\n    exit = () => {\n        this.props.cancelPlayer();\n        this.props.setPlayState(false);\n        document.body.classList.remove('noscroll');\n    };\n\n    componentWillUnmount() {\n        this.pauseLyrics();\n        this.pauseProgress();\n        this.setState = (state, callback) => {\n            return;\n        };      \n    }\n\n    render() {\n        return (\n            <div id=\"player\" className=\"show\">\n                <div className=\"player-container\">\n                    <div className=\"player-header\">\n                        <img\n                            src={albumCoverUrl(this.props.song.albummid)}\n                            alt=\"图片\"\n                            className=\"album-cover\"\n                        />\n                        <div className=\"song-info\">\n                            <div className=\"song-name\">{htmlDecode(this.props.song.songname)}</div>\n                            <div className=\"song-artist\">{htmlDecode(this.props.artist)}</div>\n                        </div>\n                        <span\n                            className={\n                                this.props.isPlay\n                                    ? 'icon-action icon-play icon-pause'\n                                    : 'icon-action icon-play icon-play'\n                            }\n                            onClick={this.onPlay}\n                        />\n                    </div>\n                    <div className=\"player-lyrics\">\n                        <div className=\"player-lyrics-lines\" ref=\"$lyricsLines\">\n                            {this.state.lyrics !== 0\n                                ? this.state.lyrics.map((list, index) => {\n                                      // console.log(list);\n                                      return (\n                                          <div className=\"player-lyrics-line\" key={index}>\n                                              {list.slice(10)}\n                                          </div>\n                                      );\n                                  })\n                                : null}\n                            {this.state.fetching ? (\n                                <div className=\"player-lyrics-line\">正在加载歌词,请等待...</div>\n                            ) : null}\n                        </div>\n                    </div>\n                    <div className=\"player-footer\">\n                        <div className=\"icon-list\" onClick={this.exit} />\n                        <div className=\"progress\">\n                            <div className=\"progress-time progress-elapsed\">\n                                {formatTime(this.state.elapsed)}\n                            </div>\n                            <div className=\"progress-bar\">\n                                <div className=\"progress-bar-progress\" ref=\"$progress\" />\n                            </div>\n                            <div className=\"progress-time progress-duration\">\n                                {formatTime(this.props.song.interval)}\n                            </div>\n                        </div>\n                        <div className=\"action\">\n                            <a href=\"#\" className=\"btn-download\">\n                                下载这首歌\n                            </a>\n                        </div>\n                    </div>\n                </div>\n                <div\n                    className=\"player-background\"\n                    style={{\n                        backgroundImage: 'url(' + albumCoverUrl(this.props.song.albummid) + ')'\n                    }}\n                />\n                <audio src={songUrl(this.props.song.songmid)} ref=\"$audio\" onEnded={this.onEnd} />\n            </div>\n        );\n    }\n}\n\nexport default connect(\n    state => ({\n        song: state.getData.song,\n        artist: state.getData.artist,\n        isPlay: state.getData.isPlay\n    }),\n    {\n        setPlayState,\n        cancelPlayer\n    }\n)(Player);\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/player/player.jsx","module.exports = __webpack_public_path__ + \"static/media/player.753dd1f0.scss\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/player/player.scss\n// module id = 171\n// module chunks = 0"],"sourceRoot":""}